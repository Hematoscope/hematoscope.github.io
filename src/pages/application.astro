---
import { Image } from "astro:assets";
import cells from "~src/assets/images/application/cells.jpg";
import slides from "~src/assets/images/application/slides.jpg";
import networking from "~src/assets/images/application/networking.jpg";
import cellHighlight from "~src/assets/images/application/app-cell-highlight.png";
import cellList from "~src/assets/images/application/app-cell-list.png";
import report from "~src/assets/images/application/report.jpg";

import { WIDTHS } from "~src/consts";
import Section from "~src/components/Section.astro";
import H from "~src/components/HeadingLink.astro";
import Layout from "~src/layouts/Layout.astro";
import SectionCard from "~src/components/SectionCard.astro";
import AlgorithmItem from "~src/components/AlgorithmItem.astro";
import CallToAction from "~src/components/CallToAction.astro";
import WorkflowStep from "~src/components/WorkflowStep.astro";
---

<Layout title="Application | Hematoscope" description="Automate the Tedium">
  <Section variant="pair">
    <SectionCard gradient>
      <h1>A New Era</h1>
      <p class="ingress">
        Digital cytopathology streamlines workflows by fostering synergy between
        physicians and technology. With AI managing time-consuming, quantifiable
        tasks, human experts apply their clinical judgment to verify and
        interpret results. To support interpretation, Hematoscope is the first
        platform to also provide reference values for healthy subjects. Remote
        collaboration becomes effortless, enabling seamless sample evaluation
        and colleague consultations. The Hematoscope application brings digital
        cytopathology to life.
      </p>
    </SectionCard>
    <Image
      src={cells}
      alt="100 times magnified image of blood cells, with annotated bounding boxes around white blood cells labeled by the Hematoscope application."
      widths={WIDTHS}
      height="300"
    />
  </Section>

  <Section variant="blank" class="workflow">
    <H level="2">Hematoscope Workflow</H>
    <ol>
      <WorkflowStep
        image={slides}
        alt="A doctor skimming through a drawer filled with bone marrow slides."
        heading="Scan Slides"
        text="Capture cytomorphological slides using your microscope."
      />
      <WorkflowStep
        image={networking}
        alt="A rack of servers with networking cables running from one to another."
        heading="Automatic Upload"
        text="Images are securely uploaded to the cloud-based file storage."
      />
      <WorkflowStep
        image={cellHighlight}
        alt="A screenshot of Hematoscope application showing a highlighted, labeled cell."
        heading="Feature Extraction"
        text="Hematoscope analyzes key features from whole-slide and single-cell images."
      />
      <WorkflowStep
        image={cellList}
        alt="A screenshot of Hematoscope application showing a list of cells with their labels."
        heading="Physician Review"
        text="Pre-classification results are reviewed and verified by a physician."
      />
      <WorkflowStep
        image={report}
        alt="A doctor reviewing a report, holding a pen in hand."
        heading="Seamless Reporting"
        text="Share a standardized digital report directly to your laboratory information system."
      />
    </ol>
  </Section>

  <Section variant="gradient-cells">
    <H level="2">Key Features</H>

    <div class="features">
      <div class="feature">
        <H level="3">Sample Triage</H>
        <p>Prioritize urgent samples with a multi-parameter risk model.</p>
      </div>
      <div class="feature">
        <H level="3">Comprehensive Image View</H>
        <p>Access whole-slide images, numerical analysis, and visual masks.</p>
      </div>
      <div class="feature">
        <H level="3">Single-Cell Analysis</H>
        <p>
          View single-cell images with classifications and potential dysplasia
          indicators.
        </p>
      </div>
      <div class="feature">
        <H level="3">Reference Comparisons</H>
        <p>Compare results with population-scale reference ranges.</p>
      </div>
      <div class="feature">
        <H level="3">Standardized Reporting</H>
        <p>
          Assess and share clinically essential findings in a structured report.
        </p>
      </div>
      <div class="feature">
        <H level="3">Collaborative Sharing</H>
        <p>
          Easily share slides and cell images with colleagues for consultations
          and meetings.
        </p>
      </div>
    </div>
  </Section>

  <Section variant="blank">
    <div class="text">
      <H level="2">Vast Suite of Algorithms</H>
      <p>
        Our AI aims to perform nearly all the same diagnostic tasks as doctors,
        enhancing every step of the analysis process rather than just optimizing
        isolated aspects. By combining cell classification with morphology,
        dysplasia assessment, and sample quality analysis, we provide a fresh
        angle for research.
      </p>
    </div>
    <div class="algorithms">
      <AlgorithmItem
        name="Cellularity"
        icon="algorithms/cellularity"
        accent="4"
      />
      <AlgorithmItem name="Center" icon="algorithms/center" accent="2" />
      <AlgorithmItem name="Scarcity" icon="algorithms/scarcity" accent="3" />
      <AlgorithmItem
        name="Classification"
        icon="algorithms/classification"
        accent="1"
      />
      <AlgorithmItem name="Lipids" icon="algorithms/lipids" accent="2" />
      <AlgorithmItem
        name="Megakaryocytes"
        icon="algorithms/megakaryocyte"
        accent="1"
      />
      <AlgorithmItem name="In-focus" icon="algorithms/focus" accent="4" />
      <AlgorithmItem name="Texture" icon="algorithms/texture" accent="3" />
    </div>
  </Section>

  <CallToAction title="Want to Learn More?" />
</Layout>

<style>
  .ingress {
    font-size: var(--text-size-ingress);
  }

  .workflow {
    counter-reset: step;
  }
  :global(.workflow > h2) {
    grid-column: content;
  }
  .workflow ol {
    display: grid;
    grid-template-areas: "image counter text";
    grid-template-columns: 1fr 6rem 1fr;
    column-gap: calc(2 * var(--element-padding));
    row-gap: calc(4 * var(--element-padding));
    position: relative;
  }
  .workflow ol::before {
    content: "";
    position: absolute;
    width: 1px;
    left: 50%;
    top: 8rem;
    bottom: 8rem;
    background-color: #d9d9d9;
    z-index: -1;
  }

  .features {
    counter-reset: feature;
    display: flex;
    flex-wrap: wrap;
    gap: var(--element-padding);
    max-width: 70em;
  }
  .feature {
    flex: 25rem 1 1;
    counter-increment: feature;
    background-color: var(--background);
    padding: var(--element-padding);
    border-radius: 0.75rem;
    box-shadow: var(--shadow-lg);

    display: grid;
    grid-template-areas:
      "number heading"
      "number paragraph";
    grid-template-columns: 5rem auto;
    column-gap: var(--element-padding);
    align-items: center;
  }
  .feature::before {
    content: counter(feature);
    font-size: 8rem;
    line-height: 6rem;
    font-weight: 900;
    grid-area: number;
    text-align: center;
  }
  .feature:nth-child(1)::before {
    color: var(--accent-2);
  }
  .feature:nth-child(2)::before {
    color: var(--accent-4);
  }
  .feature:nth-child(3)::before {
    color: var(--accent-5);
  }
  .feature:nth-child(4)::before {
    color: var(--accent-6);
  }
  .feature:nth-child(5)::before {
    color: var(--accent-1);
  }
  .feature:nth-child(6)::before {
    color: var(--accent-3);
  }

  .algorithms {
    max-width: 54rem;
    display: flex;
    flex-wrap: wrap;
    row-gap: calc(2 * var(--element-padding));
    column-gap: var(--element-padding);
    justify-content: center;
  }
  :global(.algorithms > *) {
    flex: 1 0 20%;
    min-width: 10rem;
  }

  /* Media queries for workflow section */
  @media screen and (width < 70em) {
    .workflow ol {
      column-gap: calc(var(--element-padding));
    }
  }

  @media screen and (width < 50em) {
    .workflow ol {
      display: grid;
      grid-template-areas: "image text";
      grid-template-columns: 1fr 1fr;
    }
    .workflow ol::before {
      content: unset;
    }
  }
</style>
